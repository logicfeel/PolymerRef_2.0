<html>
<head>
  <meta charset="UTF-8">
</head>
<body>
    

<h2>T. 동적 테이블 생성</h2>

<div id="t"></div>
<div id="inner_div">
    <ol>
        <li>aaaa</li>
        <li>bbbb</li>
    </ol>
</div>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="logicTable.js?v3"></script>
<script>

    // (function() {

        // 데이터셋 샘플 (head 와 body 가 있는 경우)
        var orgJson = {
            tables : [                      // * 필수
                {
                    name: "head",           // * 필수
                    colume :[               // * 필수
                        {
                            name: "key1",
                            type: String,
                            title: "번호"
                        },
                        {
                            name: "key2",
                            type: String,
                            title: "제목"
                        },
                        {
                            name: "key3",
                            type: String,
                            title: "글쓴이"
                        }
                    ]
                },
                {
                    name: "body",
                    colume :[
                        {
                            name: "key1",
                            type: Number,
                            title: "번호"
                        },
                        {
                            name: "key2",
                            type: String,
                            title: "제목"
                        },
                        {
                            name: "key3",
                            type: String,
                            title: "글쓴이"
                        }
                    ]
                }
            ],
            dataRow : {                     // * 필수
                "head": [
                    ["순번", "타이틀", "작성자"]
                ],        
                "body": [
                    [1, "제목입니다.1", "토토"],
                    [2, "제목입니다.2", "김아가"]
                ]      
            }
        };

        /**
         * 동적 테이블 사용 방법
         */
        
        // 공통 여역
        var setElem = document.querySelector('#t');
        var oTable = new LogicTable();


        // setElem.onchange = chg;
        // function chg(e) {
        //     console.log('setElem 변경');
        // }

        // 방법1 : 수동으로 저작하여 생성
        (function() {
            oTable.setHead(["번호", "제목", "글쓴이"]);
            var b = document.createElement('b');
            b.innerText = "진하게";
            var c = document.querySelector("#inner_div");
            var d = c.cloneNode(true);
            var e = document.createElement('button');
            e.innerText = "버튼임";
            oTable.setBody(
                [
                    ["1", "내용입니다.", "세리"],
                    ["2", "방과후 ㅎ...", b],
                    [e, "방과후 어딜 돌아 댕기는거야 아가야.....", d]
                ]
            );
            oTable.setCSS("table", "table table-hover table-bordered");
            oTable.setCSS("table thead td", "warning");
            setElem.appendChild(oTable.container);
        }());

        // 방법2 : 데이터셋 기반 설정 기존과 :: 단계적으로 붙일 경우 (기존에 붙여짐)
        (function() {
            // oTable.init();
            // oTable.loadDataSet(orgJson);
            // oTable.bind();
            // oTable.setCSS("table", "table table-hover table-bordered");
            // oTable.setCSS("table thead td", "warning");        
            // setElem.appendChild(oTable.container);
        }());

        // 방법3 : 데이터셋 기반 설정 :: 함축적함수 bind(pJSON)
        // (function() {
            // oTable.bind(orgJson);
            // oTable.setCSS("table", "table table-hover table-bordered");
            // oTable.setCSS("table thead td", "warning");                    
            // setElem.appendChild(oTable.container);
        // }());

        // 방법3-1 : 데이터셋 기반 설정 + 데이터셋 수정
        // (function() {
            // oTable.bind(orgJson);
            // oTable.setCSS("table", "table table-hover table-bordered");
            // oTable.setCSS("table thead td", "warning");                                
            // setElem.appendChild(oTable.container);

            // 수정접근 방법
            // 컬럼 수정 => 타입 tables 타입과 같이야함
            // oTable.update(oTable.dataSet.dr.body[0][1], value);
            // oTable.update(body[0][1], value);
            // oTable.update(body[0].key1, value);
            // 레코드 수정 => 타입 배열
            // oTable.update(body[0], value);
        // }());


        // (function() {
            var oTables = new LogicTables(); 
            oTables.init();
            oTables.loadDataSet(orgJson);
            oTables.register({
                "body": [
                    ["1", "내용입니다.", "세리"],
                    ["2", "방과후 ㅎ...", "k"]
                ]
            });            
        // }());

        // oTable.init();

    // }());

</script>

</body>
</html>